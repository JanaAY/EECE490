<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Retina Image Generator</title>
  <!-- Optional: supply a favicon to silence the 404 -->
  <!-- <link rel="icon" href="/favicon.ico"> -->
</head>
<body>
  <h1>üß† Synthetic Retina Image Generator</h1>

  <label for="count">Number of images to generate:</label>
  <input type="number" id="count" value="5" min="1" max="20">
  <button id="genBtn">Generate Images</button>

  <div id="status"></div>
  <div id="images" style="margin-top:20px;"></div>

  <script>
    const API_BASE = "https://b9b7-34-138-12-188.ngrok-free.app";

    document.getElementById('genBtn').addEventListener('click'\
    , generate);

    async function generate() {
      const count = parseInt(document.getElementById("count").value, 10);
      document.getElementById("status").innerText = "‚è≥ Generating images...";
      document.getElementById("images").innerHTML = "";

      // ‚úîÔ∏è Properly build the URL
      const res = await fetch(`${API_BASE}/generate`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ num_images: count })
      });

      const data = await res.json();

      if (data.status === "success") {
        // ‚úîÔ∏è Use backticks for this template too
        document.getElementById("status").innerText = `‚úÖ ${data.files.length} images generated`;
        for (let file of data.files) {
          const img = document.createElement("img");
          img.src = `${API_BASE}/content/generated_images/${file}`;
          img.style.width = "200px";
          img.style.margin = "10px";
          document.getElementById("images").appendChild(img);
        }
      } else {
        document.getElementById("status").innerText = "‚ùå Error: " + data.message;
      }
    }
  </script>
</body>
</html>
